<div class="dashboard-container">
  <div *ngIf="errorMessage" class="error">
    {{ errorMessage }}
    <button [routerLink]="['/login']">Log In</button>
  </div>

  <div *ngIf="user && !errorMessage" class="dashboard-content">
    <div class="dashboard-header">
      <h2>Welcome back, {{ user.email }}!</h2>
      <p>Your personal dashboard</p>
    </div>

    <!-- Quick Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <h3>{{ orders.length }}</h3>
        <p>Total Orders</p>
      </div>
      <div class="stat-card">
        <h3>{{ cartItems.length }}</h3>
        <p>Items in Cart</p>
      </div>
      <div class="stat-card">
        <h3>${{ totalCartValue.toFixed(2) }}</h3>
        <p>Cart Value</p>
      </div>
      <div class="stat-card">
        <h3>{{ user.role === 'admin' ? 'Admin' : 'Customer' }}</h3>
        <p>Account Type</p>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <h3>Quick Actions</h3>
      <div class="actions-grid">
        <button class="action-btn primary" (click)="goToProducts()">
          <span class="icon">ğŸ›ï¸</span>
          Browse Products
        </button>
        <button class="action-btn secondary" (click)="goToCart()">
          <span class="icon">ğŸ›’</span>
          View Cart ({{ cartItems.length }})
        </button>
        <button class="action-btn secondary" (click)="goToOrderHistory()">
          <span class="icon">ğŸ“‹</span>
          Order History
        </button>
        <button *ngIf="user.role === 'admin'" class="action-btn admin" (click)="goToAdminPanel()">
          <span class="icon">âš™ï¸</span>
          Admin Panel
        </button>
      </div>
    </div>

    <!-- Recent Orders -->
    <div class="recent-orders">
      <h3>Recent Orders</h3>
      <div *ngIf="orders.length === 0" class="no-orders">
        <p>You haven't placed any orders yet.</p>
        <button class="btn btn-primary" (click)="goToProducts()">Start Shopping</button>
      </div>
      <div *ngIf="orders.length > 0" class="orders-list">
        <div *ngFor="let order of orders.slice(0, 3)" class="order-item">
          <div class="order-info">
            <p><strong>Order #{{ order.id }}</strong></p>
            <p>{{ order.createdAt | date:'medium' }}</p>
          </div>
          <div class="order-total">
            <p><strong>${{ order.total }}</strong></p>
          </div>
        </div>
        <button *ngIf="orders.length > 3" class="btn btn-outline" (click)="goToOrderHistory()">
          View All Orders
        </button>
      </div>
    </div>

    <!-- Account Info -->
    <div class="account-info">
      <h3>Account Information</h3>
      <div class="info-grid">
        <div class="info-item">
          <label>Email:</label>
          <p>{{ user.email }}</p>
        </div>
        <div class="info-item">
          <label>Role:</label>
          <p>{{ user.role }}</p>
        </div>
        <div class="info-item">
          <label>Member Since:</label>
          <p>{{ user.createdAt | date:'medium' }}</p>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!user && !errorMessage" class="loading">
    <p>Loading your dashboard...</p>
  </div>
</div>
