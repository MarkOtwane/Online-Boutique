<div class="form-container">
  <h2>{{ isEditMode ? "Edit Product" : "Add a New Product" }}</h2>
  @if (successMessage) {
    <div class="success">{{ successMessage }}</div>
  }
  @if (errorMessage) {
    <div class="error">{{ errorMessage }}</div>
  }
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Product Name:</label>
      <input
        id="name"
        formControlName="name"
        type="text"
        placeholder="Enter product name"
        />
      @if (
        productForm.get('name')?.invalid && productForm.get('name')?.touched
        ) {
        <div
          class="error"
          >
          @if (productForm.get('name')?.errors?.['required']) {
            <span
              >Name is required.</span
              >
            }
            @if (productForm.get('name')?.errors?.['minlength']) {
              <span
                >Name must be at least 3 characters.</span
                >
              }
            </div>
          }
        </div>
        <div class="form-group">
          <label for="price">Price:</label>
          <input
            id="price"
            formControlName="price"
            type="number"
            step="0.01"
            placeholder="Enter price"
            />
          @if (
            productForm.get('price')?.invalid && productForm.get('price')?.touched
            ) {
            <div
              class="error"
              >
              @if (productForm.get('price')?.errors?.['required']) {
                <span
                  >Price is required.</span
                  >
                }
                @if (productForm.get('price')?.errors?.['min']) {
                  <span
                    >Price must be greater than 0.</span
                    >
                  }
                </div>
              }
            </div>
            <div class="form-group">
              <label for="categoryId">Category:</label>
              <select id="categoryId" formControlName="categoryId">
                <option value="" disabled>Select a category</option>
                @for (category of categories; track category) {
                  <option [value]="category.id">
                    {{ category.name }}
                  </option>
                }
              </select>
              @if (
                productForm.get('categoryId')?.invalid &&
                productForm.get('categoryId')?.touched
                ) {
                <div
                  class="error"
                  >
                  @if (productForm.get('categoryId')?.errors?.['required']) {
                    <span
                      >Category is required.</span
                      >
                    }
                  </div>
                }
              </div>
              <button type="submit" [disabled]="productForm.invalid">
                {{ isEditMode ? "Update Product" : "Add Product" }}
              </button>
            </form>
          </div>
